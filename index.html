<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ç”Ÿæˆé…ç½®æ–‡ä»¶</title>
    <link rel="stylesheet" href="./main.css?v=2.0.0">
    <script src="https://code.jquery.com/jquery-3.4.1.min.js" type="text/javascript"></script>
    <!-- <script src="./data.js"></script> -->
    <script>
        let likeNum = "Math.ceil(1000000*Math.random)+1";
        let staySec = "1e2";
        let iCanDoWhateverIWannaDo = true;
        let statusDing = "å¸…æ°”çš„è€å¸ˆæ­£åœ¨ç›´æ’­ä¸­";
        let loadData = function() {
            window.recordData = function(d) {
                document.getElementById("loading").innerHTML = "";
                window.dd = d;// d.data.replace(/&quot;/g, '"').replace(/&apos;/g, "'").replace(/&fyh;/g, "`").replace(/&qquot;/g, "&quot;");
                document.getElementById("down").style.display = "block";
                document.getElementById("form").style.display = "block";
                document.getElementById("set").style.display = "block";
            }
            $.ajax({
                type: "GET",
                dataType: "text",
                url: "pc-live-v3.html?t="+Math.random(),
                success: window.recordData,
                error: function(){console.log("è¯·æ±‚å¤±è´¥")}
            });
            // window.decodeJsonData(mainmainmain);
        }
        let processData = function() {
            window.dd = window.dd.replace(/dingtalk\.grouplive\.uploadLikesClick\(B,t\.favorCountCache\),t\.favorCountCache=0\)\},1e4/, "dingtalk.grouplike.uploadLikesClick(B,"+likeNum+"),t.favorCountCache=0)},"+staySec);
            window.dd = window.dd.replace(/\u76f4\u64ad\u4e2d/g, statusDing);
            if (iCanDoWhateverIWannaDo) {
                window.dd = window.dd.replace(/this\.disableThumbup\?this\.messageBox\(I\.i18next\.t\("pc_grouplive_live_favor_ban_tips"\),\[I\.i18next\.t\("pc_grouplive_i_know"\),""\]\):/, "");
            }
            // window.finalData = dd;
        }
        let downloadData = function() {
            let tag = document.createElement("a");
            let blob = new Blob([window.dd]);
            tag.style = "display:none";
            tag.download = "data.html";
            tag.href = URL.createObjectURL(blob);
            document.getElementsByTagName("body")[0].appendChild(tag);
            tag.click();
            setTimeout(function() {
                document.getElementsByTagName("body")[0].removeChild(tag);
                window.URL.revokeObjectURL(blob);
            }, 100);
        }
        let setOpt = function() {
            likeNum = document.getElementById("likesEachTime").value;
            staySec = document.getElementById("submitTime").value;
            statusDing = document.getElementById("statusDing").value;
        }
    </script>
    <script>window.onload = loadData;</script>
</head>
<body>
    <div class="page_content">
        <h1>DingTalk-LiveLikes</h1>
        <div id="loading">åŠ è½½ç»„ä»¶ä¸­......</div>
        <form id="form" style="display: none;">
            <label for="likesEachTime">æ¯æ¬¡ç‚¹å‡»å¢åŠ çš„ğŸ‘æ•°</label><input id="likesEachTime" placeholder="è¯·è¾“å…¥1-10000000ä¹‹é—´çš„æ•´åæ•°æˆ–è€…Javascriptä»£ç "><br>
            <label for="submitTime">æäº¤ç‚¹èµæ•°é—´éš”æ—¶é—´</label><input id="submitTime" placeholder="å•ä½æ¯«ç§’ï¼ŒåŸå€¼ä¸º1e4(å³10000)ï¼Œé»˜è®¤ä¿®æ”¹ä¸º1e2(å³100)"><br>
            <label for="statusDing">å·¦ä¸Šè§’çº¢æ¡†å†…æ˜¾ç¤ºå†…å®¹</label><input id="statusDing" placeholder="åŸå€¼ä¸ºâ€œç›´æ’­ä¸­â€ï¼Œé»˜è®¤ä¿®æ”¹ä¸ºâ€œå¸…æ°”çš„è€å¸ˆæ­£åœ¨ç›´æ’­â€"><br>
        </form>
        <button id="set" onclick="setOpt();processData();" style="display: none;">Set</button>
        <button id="down" onclick="downloadData()" style="display:none">Download</button>
    </div>
</body>
</html>